Functional doctest test on the app.
========================================

:Test-Layer: functional

Hilfe Ordner
------------

Zuerst setzen wir eine *plain* Uvcsite auf:

   >>> from uvcsite.app import Uvcsite
   >>> root = getRootFolder()
   >>> root['app'] = Uvcsite()

Der Hilfe Ordner wird im dem Anlegen der UVC-Site Automatisch angelegt.

   >>> root['app']
   <uvcsite.app.Uvcsite object at ...>
   >>> 'hilfe' in root['app'].keys()
   True

Nun hole ich mir den hilfe Ordner.

   >>> hilfe = root['app']['hilfe']
   >>> hilfe
   <uvcsite.helpsystem.folder.HelpFolder object at ...>

Der Hifle folder hat das interface IHelpFolder

   >>> from uvcsite.helpsystem.interfaces import IHelpFolder
   >>> IHelpFolder.providedBy(hilfe)
   True
 

Hilfe Seite
-----------

Importieren der HelpPage

   >>> from uvcsite.helpsystem.page import HelpPage
   >>> helppage = HelpPage(name="hilfe", title="hilfe-title", text="HilfeText")

Richtiges Interface?

   >>> from uvcsite.helpsystem.interfaces import IHelpPage
   >>> IHelpPage.providedBy(helppage)
   True

Hat die HelpPage die richtigen Attribute?

   >>> helppage.name
   'hilfe'

   >>> helppage.title
   'hilfe-title'

   >>> helppage.text
   'HilfeText'

Nun fuegen wir die HelpPage in den Hilfe-Ordner. Per Konvention ist der
name der HelpPage der *KEY* im Ordner.

   >>> hilfe[helppage.name] = helppage
   >>> helppage.name in hilfe.keys()
   True

Ok nun sehen wir mal ob wir auch im Browser die Hilfeseiten bekommen.

   >>> from zope.testbrowser.testing import Browser
   >>> browser = Browser()
   >>> browser.addHeader('Authorization', 'Basic mgr:mgrpw')
   >>> browser.handleErrors = False


Rufen wir zunÃ¤chst mal die index Seite des HelpFolders auf!

   >>> browser.open('http://localhost/app/hilfe')
   >>> browser.headers.get('Status').upper()
      '200 OK'

Bekommen wir auch die eigentliche Hilfeseite?
Achtung der Name der Hilfeseite ist hilfe.

   >>> browser.open('http://localhost/app/hilfe/hilfe')
   >>> 'hilfe' in browser.contents
   True
   >>> 'hilfe-title' in browser.contents
   True
   >>> 'HilfeText' in browser.contents
   True


